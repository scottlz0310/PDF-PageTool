# PDF-PageTool マニュアルテストガイドライン

## 📋 テスト概要

このドキュメントは、PDF-PageToolのマニュアルテストを体系的に実行するためのチェックリスト形式のガイドラインです。各機能を確実にテストし、品質を保証するために使用してください。

**テスト実行日**: ___________  
**テスター名**: ___________  
**ビルド/バージョン**: ___________  

---

## 🚀 テスト環境準備

### □ **事前準備チェック**
- [✅️] Python 3.8以上がインストールされている
- [✅️] 仮想環境が有効化されている
- [✅️] 必要な依存関係（requirements.txt）がインストール済み
- [✅️] プロジェクトディレクトリの権限が適切に設定されている
- [✅️] テスト用PDFファイルが準備されている（最低3つのファイル）

### □ **テストデータ準備**
- [✅️] 小さなPDFファイル（1-3ページ、<1MB）
- [✅️] 中程度のPDFファイル（5-10ページ、1-5MB）
- [✅️] 大きなPDFファイル（20ページ以上、5MB以上）
- [✅️] 回転が必要なページを含むPDFファイル
- [✅️] 特殊文字を含むファイル名のPDFファイル
- [✅️] 異なるPDFバージョンのファイル

---

## 📱 基本機能テスト

### □ **1. アプリケーション起動**

#### **1.1 正常起動**
- [✅️] 引数なしでアプリケーションが起動する
- [✅️] メインウィンドウが表示される
- [✅️] ウィンドウタイトルが「PDF-PageTool」となっている
- [✅️] アプリケーションアイコンが正しく表示される
- [✅️] メニューバーが表示される（ファイル、編集、ツール、ヘルプ）

#### **1.2 コマンドライン起動**
- [✅️] PDFファイルを引数にして起動できる
- [✅️] 複数のPDFファイルを同時に指定して起動できる
- [✅️] 存在しないファイルを指定した場合、適切なエラーメッセージが表示される**その後引数なし起動になる**

#### **1.3 初期状態確認**
- [✅️] 上部パネル（入力エリア）が表示される
- [✅️] 下部パネル（出力エリア）が表示される
- [✅️] スプリッターが機能する（上下パネルのサイズ調整可能）
- [❓️] グループボックス（PDF1、PDF2）が非表示状態になっている**意味がわからない。非表示では不具合ではないのか？**

### □ **2. ファイル操作**

#### **2.1 ファイルを開く（メニューから）**
- [✅️] ファイル → 開く でファイルダイアログが表示される
- [✅️] PDFファイル（*.pdf）フィルターが適用されている
- [✅️] 単一ファイルを選択して開くことができる
- [✅️] 複数ファイルを選択して開くことができる
- [❓️] 無効なファイル形式を選択した場合、エラーメッセージが表示される **フィルタリングされていてPDF以外は選択肢に上がらない**

#### **2.2 ドラッグ&ドロップ**
- [❌️/✅️] エクスプローラーからPDFファイルをドラッグして入力エリアにドロップできる **Windows: 正常動作 | Linux/WSL: Wayland環境制約により不可**
- [❌️/✅️] 複数ファイルを同時にドラッグ&ドロップできる **Windows: 正常動作 | Linux/WSL: Wayland環境制約により不可**
- [✅️] PDF以外のファイルをドロップした場合、無視される **Windows環境で確認済み**
- [⚠️] ドラッグ中にカーソルが適切に変化する **サムネイルをドラッグするとPointerDragIconと言う名のサムネイルサイズの画像が残る**

**📋 既知の制約**: Linux/WSL (Wayland) 環境では、PyQt6のドラッグ&ドロップイベントが正常に配信されないため、ファイルのドラッグ&ドロップ機能は利用できません。この問題はWaylandプロトコルの制約によるもので、アプリケーション側では修正不可能です。代替手段として「ファイル → 開く」メニューをご利用ください。


#### **2.3 ファイル読み込み処理**
- [❌️] ファイル読み込み中に適切なフィードバック（ログ、ステータス）が表示される **
- [✅️] サムネイル生成処理が実行される
- [✅️] 1つ目のファイル：groupBoxPDF1に表示される
- [✅️] 2つ目のファイル：groupBoxPDF2に表示される
- [✅️] 3つ目以降のファイル：動的グループボックスが作成される

### □ **3. サムネイル表示**

#### **3.1 サムネイル生成**
- [✅️] 各ページのサムネイルが生成される
- [❌️] サムネイルが適切なサイズで表示される **ページの縦横によらず、全て縦長の長方形で固定されている(設定＞表示　からサムネイルサイズを設定するとフィットするが、配置が自動で詰まってくれないので、間延びした配列になるだけ)**
- [❌️] サムネイル画像の品質が良好である **サムネイルサイズを変更すると画像がぼやけたり、サムネイルボックスのサイズにフィットもしない**
- [❓️] 生成済みサムネイルがキャッシュされる **内部状態はわからない**

#### **3.2 サムネイル操作**
- [✅️] サムネイルをクリックできる
- [✅️] サムネイルをダブルクリックで出力エリアに追加される
- [✅️] サムネイルを右クリックでコンテキストメニューが表示される **正しく出力エリアのサムネイルのみ有効になっている**
- [✅️] ツールチップでページ情報が表示される

#### **3.3 レイアウト表示**
- [✅️] サムネイルが3列のグリッドレイアウトで配置される **サムネイルサイズを小さくしても3列のままであり、サイズを小さくした意味がない**
- [✅️] グループボックス内でスクロールが機能する
- [✅️] ファイル名がグループボックスのタイトルに表示される
- [❌️] 入力ファイルを閉じることができる **間違って開いても✕ボタンもなく、終了するまで閉じられない**

---

## 🖼️ ページ操作テスト

### □ **4. ページ選択**

#### **4.1 単一選択**
- [✅️] クリックでページを選択できる
- [✅️] 選択状態が視覚的に分かる（ハイライト等）
- [✅️] 別のページをクリックして選択を変更できる 

#### **4.2 複数選択**
- [✅️] Ctrlキー + クリックで複数ページを選択できる
- [❌️] Shiftキー + クリックで範囲選択できる **機能していない**
- [❌️] 矩形ドラッグで複数ページを選択できる **ファイルドラッグと競合しているのか？OnMouse時と周辺時とで処理を分けているか**
- [❌️] 選択解除（Ctrl+クリック）が機能する **一旦CTRLクリックして選択したハイライトは消えなくなる**

#### **4.3 ファイル間選択**
- [❌️] 異なるPDFファイルのページを同時に選択できる **まだ複数選択しての正しい動作になっていない**
- [❌️] ファイルをまたいだ複数選択が機能する

### □ **5. ページ移動・追加**

#### **5.1 出力エリアへの追加**
- [✅️] ダブルクリックで出力エリアに追加される
- [✅️] ドラッグ&ドロップで出力エリアに追加される
- [❌️] 複数選択されたページを一括で追加できる
- [✅️] 追加時にステータスメッセージが表示される

#### **5.2 順序変更**
- [✅️] 出力エリア内でページをドラッグして順序を変更できる **並び替え専用に改善 - ドラッグで削除されずに正確な位置移動が可能**
- [✅️] 指定位置への挿入が正確に動作する
- [❌️] ドラッグ中にドロップ可能位置が視覚的に示される **表示されるがマウスを離しても視覚効果が残り続ける(PointerDragIcon)**

**📋 改善内容**: 出力エリア内でのドラッグ&ドロップは並び替え専用となりました。ページの削除は右クリックメニューからのみ実行可能で、意図しない削除を防止できます。既存ページの並び替えロジックを実装し、正確な位置移動が可能になりました。

#### **5.3 ページ削除**
- [✅️] 出力エリアからページを削除できる
- [❌️] 削除時に確認ダイアログが表示される（設定による）
- [✅️] 削除後にレイアウトが適切に更新される

### □ **6. ページ回転**

#### **6.1 回転機能**
- [✅️] 編集 → 右に90度回転 が機能する
- [✅️] 編集 → 左に90度回転 が機能する
- [✅️] 編集 → 180度回転 が機能する
- [✅️] 出力エリア内のページに回転が適用される

#### **6.2 回転表示**
- [✅️] 回転後のサムネイルが正しく更新される
- [✅️] 回転状態がページ情報に保存される
- [✅️] 複数回の回転が累積して適用される

---

## 💾 ファイル保存テスト

### □ **7. PDF保存**

#### **7.1 基本保存**
- [✅️] ファイル → 保存 でファイルダイアログが表示される
- [✅️] 出力先パスとファイル名を指定できる
- [✅️] 保存処理が完了する
- [✅️] 保存完了メッセージが表示される

#### **7.2 名前を付けて保存**
- [✅️] ファイル → 名前を付けて保存 が機能する
- [✅️] デフォルトファイル名「output.pdf」が提案される
- [❌️] ファイル拡張子が自動的に追加される

#### **7.3 保存内容検証**
- [✅️] 保存されたPDFファイルが開ける
- [✅️] ページ順序が正しく保存されている
- [✅️] 回転が正しく適用されている
- [✅️] ファイルサイズが妥当である

#### **7.4 エラーハンドリング**
- [ ] 保存先が書き込み不可の場合、エラーメッセージが表示される
- [✅️] 出力ページが選択されていない場合、適切な警告が表示される
- [ ] ディスク容量不足時に適切なエラー処理が行われる

---

## 🎨 UI・UX機能テスト

### □ **8. テーマ機能**

#### **8.1 テーマ切り替え**
- [✅️] 設定からテーマ設定ダイアログを開ける
- [✅️] ライトテーマとダークテーマを切り替えできる
- [❌️] テーマ変更がリアルタイムでプレビューされる **OKを押さないと反映されない**
- [✅️] テーマ設定が保存される

#### **8.2 テーマ適用**
- [✅️] メインウィンドウにテーマが適用される
- [❌️] メニューバー、ツールバーにテーマが適用される
- [✅️] ダイアログウィンドウにテーマが適用される
- [✅️] サムネイルウィジェットにテーマが適用される

### □ **9. サムネイルサイズ設定**

#### **9.1 サイズ変更**
- [✅️] ツール → サムネイルサイズ設定でダイアログが開く
- [✅️] スライダーでサイズを変更できる（50-300px）
- [✅️] 数値入力でサイズを指定できる
- [✅️] プレビューでサイズ変更が確認できる

#### **9.2 サイズ適用**
- [✅️] 設定変更後、既存サムネイルがリサイズされる
- [❌️] 新しいサムネイル解像度で再生成される **小さいサイズでは画像がぼやけるし、ちゃんと縮小されずに見切れてしまう**
- [❌️] レイアウトが適切に更新される **小さいサイズにしてもサムネイルの間隔が狭まらない(水平方向)**
- [✅️] パフォーマンスが許容範囲内である

### □ **10. レイアウト・スクロール**

#### **10.1 水平スクロール**
- [✅️] 上部パネルで水平スクロールバーが表示される
- [✅️] 複数ファイル表示時にスクロールが機能する
- [✅️] マウスホイールで横スクロールできる~~（Shift+ホイール）~~

#### **10.2 スプリッター**
- [✅️] 上下パネルの境界をドラッグして高さを調整できる
- [✅️] スプリッターの初期比率が適切（1:1）
- [✅️] 最小/最大サイズ制限が機能する
- [✅️] ウィンドウリサイズ時にスプリッター比率が維持される

#### **10.3 ウィンドウ管理**
- [✅️] ウィンドウサイズを変更できる
- [✅️] ウィンドウ位置を移動できる
- [✅️] 最大化/最小化が機能する
- [❌️] ウィンドウ状態が次回起動時に復元される

---

## ⚙️ 設定・環境テスト

### □ **11. 設定管理**

#### **11.1 設定ダイアログ**
- [✅️] ファイル → 設定で設定ダイアログが開く
- [✅️] 各種設定項目が表示される
- [✅️] 設定値を変更できる
- [✅️] 設定が保存される

#### **11.2 設定項目**
- [❌️] ログレベル設定（DEBUG, INFO, WARNING, ERROR）　**一見設定できているようだが、挙動は変わらない。起動オプションが優先されている**
- [✅️] テーマ設定 **設定変更時の動作がスムーズではない。テーマをクリックしても選択肢が消えず、OKボタンに誘導できていない**
- [✅️] サムネイルサイズ設定
- [✅️] ウィンドウ設定保存フラグ
- [✅️] 終了確認ダイアログ表示フラグ

#### **11.3 設定ファイル**
- [❓️] 設定ファイルが適切な場所に保存される **適切な位置が書いていないのでわからない**
- [❓️] 設定ファイルの形式が正しい（JSON）
- [❓️] 設定ファイル破損時のフォールバック処理

### □ **12. キーボードショートカット**

#### **12.1 基本ショートカット**
- [✅️] Ctrl+O : ファイルを開く
- [✅️] Ctrl+S : 保存
- [✅️] Ctrl+Shift+S : 名前を付けて保存
- [✅️] Ctrl+Q : 終了
- [❌️] F1 : ヘルプ **ファンクションキーは取得できなかった経験あり**

#### **12.2 編集ショートカット**
- [❌️] Ctrl+R : 右に90度回転 **機能しないがログに出力あり**
- [❌️] Ctrl+L : 左に90度回転 **ログの出力もない**
- [❌️] Delete : 選択ページ削除 **機能しないがログに出力あり**
- [❌️] Ctrl+A : 全選択
- [❌️] Escape : 選択解除

---

## 🔧 高度な機能テスト

### □ **13. バッチ処理**

#### **13.1 バッチ処理ダイアログ**
- [❌️] ツール → バッチ処理でダイアログが開く **ツールに項目がない、未実装の為以下テストSKIP**
- [ ] 複数のPDFファイルを一括処理できる
- [ ] 処理パターンを設定できる
- [ ] 出力先フォルダを指定できる

#### **13.2 バッチ実行**
- [ ] バッチ処理が正常に実行される
- [ ] 処理進捗が表示される
- [ ] エラー発生時に適切に処理される
- [ ] 処理結果が正確である

### □ **14. ログ機能**

#### **14.1 ログ出力**
- [✅️] アプリケーション動作がログに記録される 
- [✅️] エラー情報が詳細にログに記録される
- [✅️] ログレベルに応じて出力内容が調整される
- [✅️] ログファイルが適切な場所に保存される

#### **14.2 デバッグ情報**
- [ ] DEBUG レベルで詳細な動作ログが出力される
- [ ] パフォーマンス情報が記録される
- [ ] メモリ使用量の監視ログが出力される

---

## 🚨 エラーハンドリング・例外テスト

### □ **15. ファイルエラー**

#### **15.1 ファイル関連エラー**
- [ ] 存在しないファイルを開こうとした場合
- [ ] 破損したPDFファイルを開いた場合
- [ ] 読み取り権限のないファイルを開いた場合
- [ ] パスワード保護されたPDFファイルを開いた場合

#### **15.2 保存エラー**
- [ ] 書き込み権限のない場所に保存しようとした場合
- [ ] ディスク容量不足の場合
- [ ] ファイル名に無効な文字が含まれる場合

### □ **16. システムエラー**

#### **16.1 メモリ・リソース**
- [ ] 大容量ファイル処理時のメモリ不足
- [ ] 同時に多数のファイルを開いた場合
- [ ] 長時間実行時のメモリリーク確認

#### **16.2 システム限界**
- [ ] ファイルパスが非常に長い場合
- [ ] ファイル名に特殊文字が含まれる場合
- [ ] システムの一時ディスク容量不足

---

## 🌐 互換性・パフォーマンステスト

### □ **17. PDFファイル互換性**

#### **17.1 PDFバージョン**
- [ ] PDF 1.4 形式のファイル
- [ ] PDF 1.7 形式のファイル
- [ ] PDF 2.0 形式のファイル
- [ ] 異なるPDF作成ソフトで作成されたファイル

#### **17.2 特殊なPDFファイル**
- [ ] 画像のみのPDFファイル
- [ ] テキストのみのPDFファイル
- [ ] フォームが含まれるPDFファイル
- [ ] 注釈・コメントが含まれるPDFファイル

### □ **18. パフォーマンス**

#### **18.1 処理速度**
- [ ] 小さなファイル（1-3ページ）の処理時間
- [ ] 中程度のファイル（10-20ページ）の処理時間
- [ ] 大きなファイル（50ページ以上）の処理時間
- [ ] 複数ファイル同時処理の速度

#### **18.2 メモリ使用量**
- [ ] アイドル状態のメモリ使用量
- [ ] ファイル読み込み時のメモリ増加
- [ ] 大容量ファイル処理時のメモリピーク
- [ ] 長時間使用後のメモリ状況

---

## 📱 ユーザビリティテスト

### □ **19. 直感性・操作性**

#### **19.1 初回使用**
- [ ] 初めてのユーザーでも基本操作が理解できる
- [ ] ツールチップやヘルプが分かりやすい
- [ ] 操作手順が論理的である

#### **19.2 効率性**
- [ ] 頻繁に使用する機能にすぐアクセスできる
- [ ] キーボードショートカットで作業効率が向上する
- [ ] ドラッグ&ドロップで直感的に操作できる

#### **19.3 フィードバック**
- [ ] 操作結果が明確にユーザーに伝わる
- [ ] エラーメッセージが分かりやすい
- [ ] 進捗状況が適切に表示される

### □ **20. アクセシビリティ**

#### **20.1 視覚的配慮**
- [ ] ダークテーマで目の負担が軽減される
- [ ] フォントサイズが読みやすい
- [ ] 色のコントラストが適切である

#### **20.2 操作性配慮**
- [ ] マウスのみで全操作が可能
- [ ] キーボードのみで主要操作が可能
- [ ] 右利き・左利きどちらでも使いやすい

---

## 🏁 回帰テスト

### □ **21. 既知の修正済み問題**

#### **21.1 UI改善項目**
- [ ] メニューバーの自動消去問題が修正されている
- [ ] ドラッグ&ドロップでの順序入れ替えが正常に動作する
- [ ] 3つ目以降のファイル表示が正常に動作する
- [ ] 上部パネルのスクロールバーが機能する
- [ ] 引数なし起動が可能である

#### **21.2 テーマ関連**
- [ ] テーマ適用が正常に動作する
- [ ] 公式Theme-Manager互換性が維持されている
- [ ] ダークテーマの全要素が正しく表示される

### □ **22. 設定・環境関連**
- [ ] 設定ダイアログのエラーが修正されている
- [ ] ログレベル設定が正常に動作する
- [ ] ウィンドウ設定の保存・復元が機能する

---

## 📊 テスト結果記録

### 総合評価

**基本機能**: □ 合格 □ 不合格  
**UI・UX**: □ 合格 □ 不合格  
**パフォーマンス**: □ 合格 □ 不合格  
**エラーハンドリング**: □ 合格 □ 不合格  
**互換性**: □ 合格 □ 不合格  

### 発見された問題

| 項目 | 重要度 | 問題内容 | 状況 |
|------|--------|----------|------|
| | 高/中/低 | | 新規/既知 |
| | 高/中/低 | | 新規/既知 |
| | 高/中/低 | | 新規/既知 |

### 改善提案

1. 
2. 
3. 

### 次回テスト時の注意事項

1. 
2. 
3. 

---

## 📝 備考

### テスト環境詳細
- **OS**: ___________
- **Python バージョン**: ___________
- **PyQt6 バージョン**: ___________
- **画面解像度**: ___________
- **メモリ**: ___________

### その他の注意事項
- 
- 
- 

---

**テスト完了日時**: ___________  
**所要時間**: ___________  
**テスター署名**: ___________
